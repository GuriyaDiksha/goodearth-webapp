doctype html  
html(lang='en')
    head !{head.title.toString()} !{head.meta.toString()}
        link(rel="manifest", href=`${manifest}`)
        meta(name="viewport",content="width=device-width, initial-scale=1")
        meta(name="theme-color",content="#ffffff")
        link(rel="apple-touch-icon", href="/static/icon_512x512.png")
        each stylesheet in styles
          style !{stylesheet}
        if (typeof(state) !== 'undefined')
          script.
            window.state = !{state}
        script.
          if ('serviceWorker' in navigator) {
            // Use the window load event to keep the page load performant
            window.addEventListener('load', () => {
              navigator.serviceWorker.register('/sw.js', {
                scope: "/"
              });
            });
          }

    body
        div(id='main', class='main') !{content}
        div !{scripts}
